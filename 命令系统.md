## 命令系统

## shell、terminal和console

terminal ：终端

console ： 控制台

一般console只能有一个

terminal是一个封装程序，一个terminal银杏一个shell来扩充为一个具备shell功能的程序。

**文件描述符**：

每次打开一个文件，首先会给你

#0 stdin 标准输入

#1 stdout 标准输出

#2 stderr  标准错误输出

然后给你的文件一个文件描述符 一般#3

### LINUX 帮助系统

>在学习LINUX的时候，我们会遇到很多以前没有用过的命令和功能，这个时候最好使用man手册

`man`的使用方法简单，例如查看ls帮助手册，直接使用`man ls`查看ls命令帮助

```shell
LS(1) //第一模块                User Commands
          LS(1)
          

NAME #命令全名，简单的说明及用法
	 ls - list directory contents
SYNOPSIS #基本语法
	 ls [OPTION]... [FILE]...
DESCRIPTION #详细描述语法中参数的用法
	 -a --all //同用法
	 ...
  Exit status: #错误返回值
AUTHOR #作者
REPORTING BUGS #bug提交联系方式
COPYRIGHT #版权保护
SEE ALSO ##在那里可以看到更多关于命令的文档
```

### man手册常见数字含义

| 代号 | 含义                                        | 举例            |
| ---- | ------------------------------------------- | --------------- |
| 1    | 用户在shell汉景下可操作命令或可执行文件     | man 1 ls        |
| 2    | 系统内核可调用的函数和工具                  | man 2 reboot    |
| 3    | 一些常用的函数和函数库，大部分C的函数库     | man 3 readdir   |
| 4    | 设备文件的说明                              | man 4 null      |
| 5    | 配置文件或某些文件的格式                    | man 5 interface |
| 6    | 游戏                                        | man 6 ...       |
| 7    | 惯例与协议等，例如LINUX文件系统，网络协议等 | man 7 tcp       |
| 8    | 系统管理员可用的命令                        | man 8 reboot    |
| 9    | 跟kernel有关文件                            |                 |
| o    | 旧文档                                      |                 |
| n    | 新文档                                      |                 |
| l    | 本地文档                                    |                 |

在man手册中可用快捷键：

| 快捷键 | 功能 | 快捷键 | 功能呢个 |
| ------ | ---- | ------ | -------- |
|        |      |        |          |
|        |      |        |          |
|        |      |        |          |

```shell
man -f #what is 模糊查找
man -k #apropos 精确查找
```

### bash

#### 通配符

？

 代表任意单个字符

*

代表任意几个任意字符

例如：

```shell
ls *ld
你好world
```

除了*和？两个通配符外，LINUX还有以下几种通配符

| 通配符 | 含义                     | 举例 |
| ------ | ------------------------ | ---- |
| [list] | 匹配list中的任意单一单词 |      |

### 任务管理

1.`&`

在命令的后面加上`&`表示后台执行的意思

```shell
command &
```

2.`;`

在命令之间以`;`相连，表示命令顺序执行的意思

```shell
command1;command2
```

3.`&&`

命令之间以`&&`连接时，只有第一个成功，第二个才执行

```shell
command1 && command2
```

4.`||`

命令之间以`||`相连,如果前一个命令执行失败，则执行第二个命令

```shell
command1 || command2
```

5.``

命令中如果包含另一个命令，则用符号``将它包括起来，在执行的时候系统将优先执行其中的命令，然后将其结果代入父命令继续执行

```shell
command1 `command2`
```

6.`ctrl + z`
在shell中执行命令时，同时按下`ctrl + z`将其暂时挂起

```shell
[1]+ Stopped       vim helloworld.c
```

>什么是挂起 -》就是把其放在交换空间上

7.`bg`

执行bg命令， 可以将挂起的命令后台运行

8.`fg`

执行命令fg将后台执行的命令转为前台执行

9.`jobs`

在Linux可以执行jobs命令查看所有在后台执行和挂起的任务以及任务编号

### 管道，重定向

1.`>`

重定向符 箭头方向就是数据流向方向（注意：命令会先清空后面的文件，然后再写入）

2.`>>`

作用基本与>相同，不同的时>>是将内容加到文件末尾，而>内容覆盖原文件

3.`<`

与>刚好相反，时从文件到命令的重定向。它将文件的内容输出到命令作为输入

4.`<<`

? （先用不上）标准流入 

```shell
cat >> /etc/.../... << EOF
......
EOF
```

### 转义符

>在LINUX中转移符`\`的应用广泛，除此之外还包括"和"

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| “    | 硬转义，硬引用，其内部所有的shell元字符、通配符都会被关掉。注意，硬转义不允许出现 ‘ (单引号) |
| “”   | 软转义，软引用，其内部只允许出现特定的shell元字符（$,`,\）: $用于变量值替换、点用于命令替换，\用于转义单个字符 |
| \    | 反斜杠，转义，去除其后紧跟的元字符或通配符的特殊意义。       |

部分转义字符对应表

### shell 元字符

| 字符 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| =    | 为变量赋值，中间不要有空格                                   |
| ``   | 取命令执行结果，与$有相似之处                                |
| $    | 变量值替换 $变量名替换为shell变量的值；为避免在文本连接时混淆，使用${变量名}; $0..$9 代表shell文件的参数。$()同``;${}限定变量名和范围；$[]整数计算； |
| >    | prog > file 将标准输出重定向到文件                           |
| >>   | prog >> file 将标准输出追加到文件                            |
| <    | prog < file 从文件file中获取标准输入                         |
| <<   |                                                              |
| \|   | 管道命令，例：p1\|p2 将pi的标准输入作为p2标准输入 （\|& 表示不仅复制标准输出，还有标准错误输出） |
| &    | 后台运行命令，最大好处时无需等待命令执行结束，就可以继续输入命令 |
| ()   | 在子shell中执行命令，在子进程中执行                          |
| {}   | 在当前shell执行命令，或用在变量替换的界定范围                |
| []   | 字符通配，匹配括号内之一                                     |
| ;    | 命令结束符                                                   |
| &&   | 只有第一个成功，第二个才执行                                 |
| \|\| | 如果前一个命令执行失败，则执行第二个命令                     |
| !    | command1 \|\| command2执行历史纪录中的命令!731;匹配最近的一次命令!echo;取非ls /dev/sda[!1];结果取反!echo ok; echo $?(上一条命令执行结果) |
| %    | %1相当于fg 1                                                 |
| ^    | 取非，和！一样；`^string1^string2^`将上一命令string1替换位string2 |
| ~    | heme 目录                                                    |
| #    | 注释                                                         |
| *    | 通配符，任意字符                                             |
| ?    | 通配符，任一字符                                             |
| .    | 当前目录；source(将一个文件中脚本内容放在当前环境下执行)     |
| -    | 减号；上次工作目录                                           |
| :    | 真值；空命令                                                 |
| \    | 转义                                                         |
| /    | 目录分割符                                                   |



