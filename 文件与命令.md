##  文件与命令

### 文件命令

| 命令  | 功能         | 命令  | 功能             |
| ----- | ------------ | ----- | ---------------- |
| cd    | 切换当前目录 | pwd   | 打印当前工作目录 |
| mkdir | 创建目录     | rmdir | 删除目录         |

- 绝对路径

  

- 相对路径

### cd 切换工作目录

```shell
cd /etc  #直接切换到 /etc 目录
cd .. 	 #切换到上层目录
cd .  	 #切换到当前目录
cd  	 #回到自己家目录
cd ～     #回到自己家目录
cd - 	 #回到上次工作目录
```

### pwd 打印当前工作目录

- pwd [-LP]

  L : 显示逻辑工作目录

  P : 显示物理工作目录

```shell
pwd -L
pwd -P
```

### MKDIR 创建目录

- mkdir [pm] <dir>

  -p  自动创建父目录

  -m 设置权限

### RMDIR 删除目录

- rmdir [p] <dir>

  p 删除祖先 (遇到非空目录停止)

./a.out 当前目录下可执行文件 a.out 要看可执行权限

## 文件与目录的管理

| 命令     | 功能               | 命令    | 功能     |
| -------- | ------------------ | ------- | -------- |
| ls       | 显示文件及目录信息 | cp      | 拷贝     |
| rm       | 删除               | mv      | 移动     |
| basename | 取文件名           | dirname | 取目录名 |

### CP 拷贝

- cp [irapdslu] <sour> <des>

- 选项

  -i : 若文件存在，询问用户

  -r : 递归复制

  -a : pdr的集合 (-r,-p,-d)

  -p : 连同文件属性一起拷贝

  -d : 若源文件为链接文件的属性，则复制连接文件的属性

  -s : 拷贝为软连接

  -l : 拷贝为硬连接

  -u : 源文件比目的文件新才拷贝（系统备份）

  尝试 : cp file1 file2 ... dir

### RM 删除

- rm [irf] <dir_or_file>

- 选项：

  -i : 互动模式

  -r : 递归删除

  -f : force （要是重要文件，那你凉了。）

### MV 移动

- mv [ifu] <source...> <dest>

  mv source1 source2 source3 dir

- 选项 

  -i : 互动模式

  -f : force

  -u : 源文件更新才会移动

### basename

basename 路径 取出一个路径最后的文件名

```shell
basename /etc/aaaa/aaaa/c
/etc/aaaa/aaaa
```

### dirname 

dirname 路径 取出文件名前的所有路径

```shell
dirname /etc/aaaa/aaaa/c
c
```

## 文件内容查阅

| 命令 | 功能                         | 命令 | 功能               |
| ---- | ---------------------------- | ---- | ------------------ |
| cat  | 正向连续读                   | tac  | 反向连续读         |
| nl   | 输出行号显示文件             | more | 一页一页的显示文件 |
| less | 与more相似，但是可以上下翻看 | head | 只看头几行         |
| tail | 只看末几行                   | od   | 以二进制方式查看   |

### CAT 正向连续读

- cat [-AbEnTv] <file>

- 选项

  -A : 相当于-vET

  -v  : 列出看不见的字符

  -E : 显示断行行为$

  -T : 显示TAB为^I

  -b : 列出行号

  -n : 列出行号，包括空行

### TAC 反向连续读

- 与cat刚好相反，从最后一行开始打印

### NL 输出行号显示文件

- nl [-bnw] <file>

- 选项

  -b : 行号指定的方式

  ​	-b a : 相当于cat -a

  ​	-b t : 相当于cat -b

  -n : 列出行号的表示方法

  ​	-n ln : 行好在屏幕最左边显示

  ​	-n rn : 行号在自己字段最左边显示

  ​	-n rz : 行号在自己字段最右边显示，前面自动补全0

  -w <num> : 行号所占位数

### MORE 按页查看

- more file

  /string  向下查找string关键字

  :f 显示文件名称和当前显示的行数

  q 离开

### LESS 按页查看

- less file

  /string 向下查找 n : 继续向下查找

  /?string 反向查找 N : 继续向下查找

### 修改文件时间与新建文件

- 文件的三个时间

  mtime : 内容数据改动时才更新这个文件

  ctime : 文件的权限，数相爱东时才更新这个时间

  atime : 文件的内容被取用access 时，才更新时间

ls -l --time=ctime /etc/hostname          

ls -l 默认显示的是mtime

- touch [-acdmt] <file>

  -a : 仅修改访问时间

  -c : 仅修改文件的时间，如果文件不存在，不新建

  -d : 修改文件日期

  -m : 仅修改mtime

### 文件隐藏属性

缓冲区会隔一段时间或者满了再往磁盘上写入

- chattr [+-=] [ASacdistu] <file_or_dir>

  A : 不修改atime

  S : 同步写入

  a : 只能增加数据

  c : 自动压缩，解压

  d : 不会被dump程序备份

  i : 不能删除，修改，建立连接

  s : 文件删除时，直接从磁盘删除

  u : 文件删除时，数据内容存在磁盘中

### 文件的特殊权限

set_uid     二进制程序文件，非脚本    用户在执行该程序是获取程序所有者权限   代号：s

set_gid    目录和二进制程序文件  用户在该目录里，有效组边变为目录所属组		代号：s

sticky Bit  目录   在该目录下，用户只能删除自己创建的内容

有效组 ： 在当前环境下自己的所属组   代号：t

t只有o（其他用户）有，当没有x时变为T。

注：ls -ald 目录名 #只显示一个目录的信息

bit mask 比特掩码

例如 ：010 代表 w权限

如果 mod & 010 结果代表是否有这个权限。